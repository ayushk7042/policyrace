ssh root@72.60.221.29

Affalliances@1234

cd /var/www/



Upload ZIP folder named as “internal.zip”, which includes code for frontend and backend with folder name “policyrace.com” & internaladmin.affalliances.com .

Extract the file

sudo unzip policyrace.com.zip -d /var/www/



Set correct permissions

sudo chmod -R 755 /var/www/policyrace.com



Update system

sudo apt update && sudo apt upgrade -y





Install Nginx

sudo apt install nginx -y



Create Nginx config

sudo nano /etc/nginx/sites-available/policyrace.com



server {

    server_name policyrace.com;



    location / {

        proxy_pass http://127.0.0.1:5155;

        proxy_http_version 1.1;

        proxy_set_header Host $host;

        proxy_set_header X-Real-IP $remote_addr;

        proxy_set_header Upgrade $http_upgrade;

        proxy_set_header Connection "upgrade";

    }







}

server {

    listen 80;

    listen [::]:80;

    server_name policyrace.com;

    return 301 https://$host$request_uri;





}







Enable the site

sudo ln -s /etc/nginx/sites-available/policyrace.com /etc/nginx/sites-enabled/



sudo nginx -t

sudo systemctl restart nginx




Install SSL (HTTPS)
sudo certbot --nginx -d policyrace.com

Restart and enable services



sudo systemctl enable nginx

sudo systemctl restart nginx


pm2 start "npm run dev" --name internal-affalliances

